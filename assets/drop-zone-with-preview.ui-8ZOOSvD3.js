import{j as l}from"./jsx-runtime-BjG_zV1W.js";import{n as y}from"./image-ChyQtvS6.js";import{r as a}from"./index-B1GeB8Nz.js";import{B as D}from"./button.ui-CCnMz6ch.js";import{D as b}from"./drop-zone.ui-DQRe2tdh.js";import{c as N}from"./cn-CytzSlOG.js";import{X as h}from"./x-DuZhaump.js";function v(i){return new Promise((e,r)=>{const s=new FileReader;s.onload=()=>e(s.result),s.onerror=r,s.readAsDataURL(i)})}function U({controlled:i,default:e}){const r=i!==void 0,[s,f]=a.useState(e),t=r?i:s,o=a.useCallback(u=>{r||f(u)},[r]);return[t,o,r]}function _({value:i,onValueChange:e,defaultValue:r,className:s,...f}){const[t,o,u]=U({controlled:i,default:r}),[m,c]=a.useState(typeof t=="string"?t:null),d=a.useCallback(n=>{o(n),e==null||e(n)},[e,o]),x=async n=>{if(n.length>0){const p=n[0],w=await v(p);c(w),d==null||d(p)}},j=()=>{u||o(null),e==null||e(null)};return a.useEffect(()=>{t===null?c(null):t instanceof File?v(t).then(c):typeof t=="string"&&c(t)},[t]),l.jsx("div",{className:N("relative grid",s),children:m?l.jsxs("div",{className:"group relative min-h-[160px] w-full overflow-hidden rounded-lg border",children:[l.jsx(y,{fill:!0,src:m,alt:"이미지 미리보기",className:"object-cover"}),l.jsxs(D,{type:"button",variant:"destructive",size:"icon",className:"absolute right-2 top-2 z-10 opacity-0 transition-opacity group-hover:opacity-100",onClick:j,children:[l.jsx("span",{className:"sr-only",children:"삭제"}),l.jsx(h,{className:"h-4 w-4","aria-hidden":!0})]})]}):l.jsx(b,{multiple:!1,accept:{"image/*":[]},onDrop:x,...f})})}export{_ as D};
