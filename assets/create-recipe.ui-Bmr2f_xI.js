import{j as e}from"./jsx-runtime-BjG_zV1W.js";import{z as t,F as k,a as l,b as o,c as m,d as a,f as i,t as z}from"./index-C6si8OIY.js";import{u as F,a as p,b}from"./index.esm-DgZpH6ar.js";import{B as u}from"./button.ui-CCnMz6ch.js";import{D as y}from"./drop-zone-with-preview.ui-8ZOOSvD3.js";import{I as x}from"./input.ui-Croae_oO.js";import{L as f}from"./label.ui-J_JczIqu.js";import{T as N}from"./textarea.ui-Dy2PMZj1.js";import{c as _}from"./createLucideIcon-B2mkThYZ.js";import{X as v}from"./x-DuZhaump.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=_("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),S=t.union([t.instanceof(File),t.string()]).nullable().superRefine((r,d)=>{r===null&&d.addIssue({code:t.ZodIssueCode.custom,message:"이미지를 선택해주세요"})}),I=t.object({name:t.string().trim().min(1,{message:"재료 이름을 입력해주세요"}),quantity:t.string().trim().min(1,{message:"재료 양을 입력해주세요"})}),w=t.object({image:S,content:t.string().trim().min(1,{message:"단계 설명을 입력해주세요"})}),A=t.object({title:t.string().trim().min(1,{message:"레시피 제목을 입력해주세요"}).default(""),thumbnail:S.default(null),cookingTime:t.number({invalid_type_error:"올바른 값을 입력해주세요",required_error:"레시피 소요 시간을 입력해주세요"}).min(0,{message:"레시피 소요 시간을 입력해주세요"}),calories:t.number({invalid_type_error:"올바른 값을 입력해주세요"}).min(0,{message:"칼로리를 입력해주세요"}).optional(),servings:t.number({invalid_type_error:"올바른 값을 입력해주세요",required_error:"분량을 입력해주세요"}).min(0,{message:"분량을 입력해주세요"}),description:t.string().trim().min(1,{message:"레시피에 대한 소개를 입력해주세요"}).default(""),tags:t.array(t.string().trim()).default([]),ingredients:t.array(I),cookingSteps:t.array(w),carbohydrate:t.number({invalid_type_error:"올바른 값을 입력해주세요"}).optional(),protein:t.number({invalid_type_error:"올바른 값을 입력해주세요"}).optional(),fat:t.number({invalid_type_error:"올바른 값을 입력해주세요"}).optional(),sodium:t.number({invalid_type_error:"올바른 값을 입력해주세요"}).optional()});function G(){const r=F({resolver:z(A),defaultValues:{ingredients:[{name:"",quantity:""}],cookingSteps:[{content:"",image:null}]}}),d=async s=>{try{const n=structuredClone(s);s.thumbnail instanceof File&&(n.thumbnail=await new Promise(c=>{setTimeout(()=>{c("https://picsum.photos/id/237/350/200")},1e3)}));const h=s.cookingSteps.map(c=>c.image instanceof File?new Promise(g=>{setTimeout(()=>{g("https://picsum.photos/id/237/350/200")},1e3)}):null);let j=0;for await(const c of h)c&&(n.cookingSteps[j].image=c),j++;console.log("최종 제출될 데이터:",n)}catch(n){console.error("레시피 저장 중 오류 발생:",n)}};return e.jsx(k,{...r,children:e.jsxs("form",{className:"flex flex-col gap-y-4",onSubmit:r.handleSubmit(d),children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsxs("div",{className:"flex flex-1 flex-col gap-y-4",children:[e.jsx(l,{control:r.control,name:"title",render:({field:s})=>e.jsxs(o,{children:[e.jsx(m,{children:"레시피 제목"}),e.jsx(a,{children:e.jsx(x,{size:"lg",placeholder:"레시피 제목을 입력하세요",...s})}),e.jsx(i,{})]})}),e.jsx(l,{control:r.control,name:"description",render:({field:s})=>e.jsxs(o,{children:[e.jsx(m,{children:"요리 소개"}),e.jsx(a,{children:e.jsx(N,{className:"h-24 resize-none",placeholder:"요리에 대한 간단한 소개를 입력하세요",...s})}),e.jsx(i,{})]})}),e.jsx(l,{control:r.control,name:"tags",render:({field:s})=>e.jsxs(o,{children:[e.jsx(m,{children:"태그"}),e.jsx(a,{children:e.jsx(x,{size:"lg",placeholder:"태그를 입력하세요 (쉼표로 구분)",...s})}),e.jsx(i,{})]})})]}),e.jsx(l,{control:r.control,name:"thumbnail",render:({field:s})=>e.jsxs(o,{children:[e.jsx(m,{children:"대표 이미지"}),e.jsx(a,{children:e.jsx(y,{className:"aspect-square md:w-64",value:s.value,onValueChange:n=>s.onChange(n)})}),e.jsx(i,{})]})})]}),e.jsxs("fieldset",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3",children:[e.jsx(l,{control:r.control,name:"cookingTime",render:({field:s})=>e.jsxs(o,{children:[e.jsx(m,{children:"조리시간"}),e.jsx(a,{children:e.jsx(x,{type:"number",min:0,size:"lg",placeholder:"30",rightSlot:e.jsx("span",{className:"text-muted-foreground",children:"분"}),...s,onChange:n=>s.onChange(n.target.valueAsNumber)})}),e.jsx(i,{})]})}),e.jsx(l,{control:r.control,name:"calories",render:({field:s})=>e.jsxs(o,{children:[e.jsx(m,{children:"칼로리"}),e.jsx(a,{children:e.jsx(x,{type:"number",min:0,size:"lg",placeholder:"300",rightSlot:e.jsx("span",{className:"text-muted-foreground",children:"kcal"}),...s,onChange:n=>s.onChange(n.target.valueAsNumber)})}),e.jsx(i,{})]})}),e.jsx(l,{control:r.control,name:"servings",render:({field:s})=>e.jsxs(o,{children:[e.jsx(m,{children:"분량"}),e.jsx(a,{children:e.jsx(x,{type:"number",min:0,size:"lg",placeholder:"2",rightSlot:e.jsx("span",{className:"text-muted-foreground",children:"인분"}),...s,onChange:n=>s.onChange(n.target.valueAsNumber)})}),e.jsx(i,{})]})})]}),e.jsxs("fieldset",{className:"flex flex-col gap-y-4",children:[e.jsx(f,{asChild:!0,children:e.jsx("legend",{className:"mb-2",children:"재료"})}),e.jsx(q,{})]}),e.jsxs("fieldset",{className:"flex flex-col gap-y-4",children:[e.jsx(f,{asChild:!0,children:e.jsx("legend",{className:"mb-2",children:"조리 순서"})}),e.jsx(L,{})]}),e.jsxs("fieldset",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-4",children:[e.jsx("legend",{className:"mb-1 text-sm font-bold leading-none",children:"영양 정보"}),e.jsx(l,{control:r.control,name:"carbohydrate",render:({field:s})=>e.jsxs(o,{className:"flex-1",children:[e.jsx(m,{children:"탄수화물"}),e.jsx(a,{children:e.jsx(x,{type:"number",size:"lg",placeholder:"0",rightSlot:e.jsx("span",{className:"text-muted-foreground",children:"g"}),...s,onChange:n=>s.onChange(n.target.valueAsNumber)})}),e.jsx(i,{})]})}),e.jsx(l,{control:r.control,name:"protein",render:({field:s})=>e.jsxs(o,{className:"flex-1",children:[e.jsx(m,{children:"단백질"}),e.jsx(a,{children:e.jsx(x,{type:"number",size:"lg",placeholder:"0",rightSlot:e.jsx("span",{className:"text-muted-foreground",children:"g"}),...s,onChange:n=>s.onChange(n.target.valueAsNumber)})}),e.jsx(i,{})]})}),e.jsx(l,{control:r.control,name:"fat",render:({field:s})=>e.jsxs(o,{className:"flex-1",children:[e.jsx(m,{children:"지방"}),e.jsx(a,{children:e.jsx(x,{type:"number",size:"lg",placeholder:"0",rightSlot:e.jsx("span",{className:"text-muted-foreground",children:"g"}),...s,onChange:n=>s.onChange(n.target.valueAsNumber)})}),e.jsx(i,{})]})}),e.jsx(l,{control:r.control,name:"sodium",render:({field:s})=>e.jsxs(o,{className:"flex-1",children:[e.jsx(m,{children:"나트륨"}),e.jsx(a,{children:e.jsx(x,{type:"number",size:"lg",placeholder:"0",rightSlot:e.jsx("span",{className:"text-muted-foreground",children:"mg"}),...s,onChange:n=>s.onChange(n.target.valueAsNumber)})}),e.jsx(i,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-x-4",children:[e.jsx(u,{type:"button",size:"lg",variant:"outline",children:"임시 저장"}),e.jsx(u,{size:"lg",type:"submit",children:"작성 완료"})]})]})})}function q(){const r=p(),{fields:d,append:s,remove:n}=b({control:r.control,name:"ingredients"}),h=()=>s({name:"",quantity:""}),j=c=>{n(c),d.length===1&&s({name:"",quantity:""})};return e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"flex flex-col gap-y-4",children:d.map((c,g)=>e.jsx(R,{step:g,onRemove:()=>j(g)},c.id))}),e.jsxs(u,{type:"button",variant:"ghost",onClick:h,children:[e.jsx(C,{"aria-hidden":!0}),"재료 추가"]})]})}function R({step:r,onRemove:d}){const s=p();return e.jsxs("div",{className:"flex items-start gap-x-4",children:[e.jsxs("div",{className:"flex flex-1 items-start gap-x-4",children:[e.jsx(l,{control:s.control,name:`ingredients.${r}.name`,render:({field:n})=>e.jsxs(o,{className:"flex-1",children:[e.jsx(a,{children:e.jsx(x,{size:"lg",placeholder:"재료명",...n})}),e.jsx(i,{})]})}),e.jsx(l,{control:s.control,name:`ingredients.${r}.quantity`,render:({field:n})=>e.jsxs(o,{children:[e.jsx(a,{children:e.jsx(x,{className:"w-32",size:"lg",placeholder:"수량",...n})}),e.jsx(i,{})]})})]}),e.jsxs(u,{type:"button",variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-accent-foreground",onClick:d,children:[e.jsx("span",{className:"sr-only",children:"삭제"}),e.jsx(v,{"aria-hidden":!0})]})]})}function L(){const r=p(),{fields:d,append:s,remove:n}=b({control:r.control,name:"cookingSteps"}),h=()=>s({content:"",image:null}),j=c=>{n(c),d.length===1&&s({content:"",image:null})};return e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"flex flex-col gap-y-4",children:d.map((c,g)=>e.jsx(T,{step:g,onRemove:()=>j(g)},c.id))}),e.jsxs(u,{type:"button",variant:"ghost",onClick:h,children:[e.jsx(C,{"aria-hidden":!0}),"순서 추가"]})]})}function T({step:r,onRemove:d}){const s=p();return e.jsxs("div",{className:"flex items-start gap-x-4",children:[e.jsx("div",{className:"flex h-6 w-6 select-none items-center justify-center rounded-full bg-primary text-primary-foreground",children:r+1}),e.jsxs("fieldset",{className:"flex flex-1 flex-col gap-2 md:flex-row",children:[e.jsx(l,{control:s.control,name:`cookingSteps.${r}.image`,render:({field:n})=>e.jsxs(o,{children:[e.jsx(a,{children:e.jsx(y,{className:"aspect-square md:w-60",value:n.value,onValueChange:h=>n.onChange(h)})}),e.jsx(i,{})]})}),e.jsx(l,{control:s.control,name:`cookingSteps.${r}.content`,render:({field:n})=>e.jsxs(o,{className:"flex flex-1 flex-col",children:[e.jsx(a,{children:e.jsx(N,{placeholder:"조리법을 입력하세요",className:"min-h-24 flex-1 resize-none",...n})}),e.jsx(i,{})]})})]}),e.jsxs(u,{type:"button",variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-accent-foreground",onClick:d,children:[e.jsx("span",{className:"sr-only",children:"삭제"}),e.jsx(v,{"aria-hidden":!0})]})]})}export{G as C};
